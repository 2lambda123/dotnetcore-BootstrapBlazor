function t(t){return t.split("-")[0]}function e(t){return t.split("-")[1]}function n(e){return["top","bottom"].includes(t(e))?"x":"y"}function o(t){return"y"===t?"height":"width"}function i(i,r,l){let{reference:s,floating:a}=i;const c=s.x+s.width/2-a.width/2,f=s.y+s.height/2-a.height/2,u=n(r),d=o(u),p=s[d]/2-a[d]/2,h="x"===u;let m;switch(t(r)){case"top":m={x:c,y:s.y-a.height};break;case"bottom":m={x:c,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:f};break;case"left":m={x:s.x-a.width,y:f};break;default:m={x:s.x,y:s.y}}switch(e(r)){case"start":m[u]-=p*(l&&h?-1:1);break;case"end":m[u]+=p*(l&&h?-1:1)}return m}!function(){const t={SOME_OBJECT:{one:1,two:[1,2],three:"3"},UNUSED:null};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,t)}catch(t){}globalThis.process={env:t}}();function r(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:s,rects:a,elements:c,strategy:f}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:h=!1,padding:m=0}=e,g=r(m),y=c[h?"floating"===p?"reference":"floating":p],w=l(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(y)))||n?y:y.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(c.floating)),boundary:u,rootBoundary:d,strategy:f})),x=l(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===p?{...a.floating,x:o,y:i}:a.reference,offsetParent:await(null==s.getOffsetParent?void 0:s.getOffsetParent(c.floating)),strategy:f}):a[p]);return{top:w.top-x.top+g.top,bottom:x.bottom-w.bottom+g.bottom,left:w.left-x.left+g.left,right:x.right-w.right+g.right}}const a=Math.min,c=Math.max;function f(t,e,n){return c(t,a(e,n))}const u={left:"right",right:"left",bottom:"top",top:"bottom"};function d(t){return t.replace(/left|right|bottom|top/g,(t=>u[t]))}const p={start:"end",end:"start"};function h(t){return t.replace(/start|end/g,(t=>p[t]))}const m=function(i){return void 0===i&&(i={}),{name:"flip",options:i,async fn(r){var l;const{placement:a,middlewareData:c,rects:f,initialPlacement:u,platform:p,elements:m}=r,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:w,fallbackStrategy:x="bestFit",flipAlignment:v=!0,...b}=i,R=t(a),E=w||(R===u||!v?[d(u)]:function(t){const e=d(t);return[h(t),e,h(e)]}(u)),T=[u,...E],L=await s(r,b),A=[];let O=(null==(l=c.flip)?void 0:l.overflows)||[];if(g&&A.push(L[R]),y){const{main:t,cross:i}=function(t,i,r){void 0===r&&(r=!1);const l=e(t),s=n(t),a=o(s);let c="x"===s?l===(r?"end":"start")?"right":"left":"start"===l?"bottom":"top";return i.reference[a]>i.floating[a]&&(c=d(c)),{main:c,cross:d(c)}}(a,f,await(null==p.isRTL?void 0:p.isRTL(m.floating)));A.push(L[t],L[i])}if(O=[...O,{placement:a,overflows:A}],!A.every((t=>t<=0))){var D,P;const t=(null!=(D=null==(P=c.flip)?void 0:P.index)?D:0)+1,e=T[t];if(e)return{data:{index:t,overflows:O},reset:{placement:e}};let n="bottom";switch(x){case"bestFit":{var C;const t=null==(C=O.slice().sort(((t,e)=>t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)-e.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)))[0])?void 0:C.placement;t&&(n=t);break}case"initialPlacement":n=u}if(a!==n)return{reset:{placement:n}}}return{}}}};const g=function(o){return void 0===o&&(o=0),{name:"offset",options:o,async fn(i){const{x:r,y:l,placement:s,rects:a,platform:c,elements:f}=i,u=function(o,i,r,l){void 0===l&&(l=!1);const s=t(o),a=e(o),c="x"===n(o),f=["left","top"].includes(s)?-1:1,u=l&&c?-1:1,d="function"==typeof r?r({...i,placement:o}):r,p="number"==typeof d;let{mainAxis:h,crossAxis:m,alignmentAxis:g}=p?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&"number"==typeof g&&(m="end"===a?-1*g:g),c?{x:m*u,y:h*f}:{x:h*f,y:m*u}}(s,a,o,await(null==c.isRTL?void 0:c.isRTL(f.floating)));return{x:r+u.x,y:l+u.y,data:u}}}};function y(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function w(t){if(null==t)return window;if(!y(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function x(t){return w(t).getComputedStyle(t)}function v(t){return y(t)?"":t?(t.nodeName||"").toLowerCase():""}function b(t){return t instanceof w(t).HTMLElement}function R(t){return t instanceof w(t).Element}function E(t){return t instanceof w(t).ShadowRoot||t instanceof ShadowRoot}function T(t){const{overflow:e,overflowX:n,overflowY:o}=x(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function L(t){return["table","td","th"].includes(v(t))}function A(t){const e=navigator.userAgent.toLowerCase().includes("firefox"),n=x(t);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter}function O(){return!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const D=Math.min,P=Math.max,C=Math.round;function S(t,e,n){var o,i,r,l;void 0===e&&(e=!1),void 0===n&&(n=!1);const s=t.getBoundingClientRect();let a=1,c=1;e&&b(t)&&(a=t.offsetWidth>0&&C(s.width)/t.offsetWidth||1,c=t.offsetHeight>0&&C(s.height)/t.offsetHeight||1);const f=R(t)?w(t):window,u=!O()&&n,d=(s.left+(u&&null!=(o=null==(i=f.visualViewport)?void 0:i.offsetLeft)?o:0))/a,p=(s.top+(u&&null!=(r=null==(l=f.visualViewport)?void 0:l.offsetTop)?r:0))/c,h=s.width/a,m=s.height/c;return{width:h,height:m,top:p,right:d+h,bottom:p+m,left:d,x:d,y:p}}function k(t){return(e=t,(e instanceof w(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function N(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function W(t){return S(k(t)).left+N(t).scrollLeft}function H(t,e,n){const o=b(e),i=k(e),r=S(t,o&&function(t){const e=S(t);return C(e.width)!==t.offsetWidth||C(e.height)!==t.offsetHeight}(e),"fixed"===n);let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==v(e)||T(i))&&(l=N(e)),b(e)){const t=S(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else i&&(s.x=W(i));return{x:r.left+l.scrollLeft-s.x,y:r.top+l.scrollTop-s.y,width:r.width,height:r.height}}function V(t){return"html"===v(t)?t:t.assignedSlot||t.parentNode||(E(t)?t.host:null)||k(t)}function M(t){return b(t)&&"fixed"!==getComputedStyle(t).position?t.offsetParent:null}function j(t){const e=w(t);let n=M(t);for(;n&&L(n)&&"static"===getComputedStyle(n).position;)n=M(n);return n&&("html"===v(n)||"body"===v(n)&&"static"===getComputedStyle(n).position&&!A(n))?e:n||function(t){let e=V(t);for(E(e)&&(e=e.host);b(e)&&!["html","body"].includes(v(e));){if(A(e))return e;e=e.parentNode}return null}(t)||e}function B(t){if(b(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=S(t);return{width:e.width,height:e.height}}function z(t){const e=V(t);return["html","body","#document"].includes(v(e))?t.ownerDocument.body:b(e)&&T(e)?e:z(e)}function F(t,e){var n;void 0===e&&(e=[]);const o=z(t),i=o===(null==(n=t.ownerDocument)?void 0:n.body),r=w(o),l=i?[r].concat(r.visualViewport||[],T(o)?o:[]):o,s=e.concat(l);return i?s:s.concat(F(l))}function $(t,e,n){return"viewport"===e?l(function(t,e){const n=w(t),o=k(t),i=n.visualViewport;let r=o.clientWidth,l=o.clientHeight,s=0,a=0;if(i){r=i.width,l=i.height;const t=O();(t||!t&&"fixed"===e)&&(s=i.offsetLeft,a=i.offsetTop)}return{width:r,height:l,x:s,y:a}}(t,n)):R(e)?function(t,e){const n=S(t,!1,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e,n):l(function(t){var e;const n=k(t),o=N(t),i=null==(e=t.ownerDocument)?void 0:e.body,r=P(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=P(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let s=-o.scrollLeft+W(t);const a=-o.scrollTop;return"rtl"===x(i||n).direction&&(s+=P(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:l,x:s,y:a}}(k(t)))}function U(t){const e=F(t),n=["absolute","fixed"].includes(x(t).position)&&b(t)?j(t):t;return R(n)?e.filter((t=>R(t)&&function(t,e){const n=null==e||null==e.getRootNode?void 0:e.getRootNode();if(null!=t&&t.contains(e))return!0;if(n&&E(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&"body"!==v(t))):[]}const I={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[..."clippingAncestors"===n?U(e):[].concat(n),o],l=r[0],s=r.reduce(((t,n)=>{const o=$(e,n,i);return t.top=P(o.top,t.top),t.right=D(o.right,t.right),t.bottom=D(o.bottom,t.bottom),t.left=P(o.left,t.left),t}),$(e,l,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=b(n),r=k(n);if(n===r)return e;let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&"fixed"!==o)&&(("body"!==v(n)||T(r))&&(l=N(n)),b(n))){const t=S(n,!0);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}return{...e,x:e.x-l.scrollLeft+s.x,y:e.y-l.scrollTop+s.y}},isElement:R,getDimensions:B,getOffsetParent:j,getDocumentElement:k,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:H(e,j(n),o),floating:{...B(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===x(t).direction};const X=(t,e,n)=>(async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:l=[],platform:s}=n,a=await(null==s.isRTL?void 0:s.isRTL(e));if("production"!==process.env.NODE_ENV&&l.filter((t=>{let{name:e}=t;return"autoPlacement"===e||"flip"===e})).length>1)throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement`","middleware detected. This will lead to an infinite loop. Ensure only","one of either has been passed to the `middleware` array."].join(" "));let c=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:f,y:u}=i(c,o,a),d=o,p={},h=0;for(let n=0;n<l.length;n++){if("production"!==process.env.NODE_ENV&&(h++,h>100))throw new Error(["Floating UI: The middleware lifecycle appears to be","running in an infinite loop. This is usually caused by a `reset`","continually being returned without a break condition."].join(" "));const{name:m,fn:g}=l[n],{x:y,y:w,data:x,reset:v}=await g({x:f,y:u,initialPlacement:o,placement:d,strategy:r,middlewareData:p,rects:c,platform:s,elements:{reference:t,floating:e}});f=null!=y?y:f,u=null!=w?w:u,p={...p,[m]:{...p[m],...x}},v&&("object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(c=!0===v.rects?await s.getElementRects({reference:t,floating:e,strategy:r}):v.rects),({x:f,y:u}=i(c,d,a))),n=-1)}return{x:f,y:u,placement:d,strategy:r,middlewareData:p}})(t,e,{platform:I,...n}),Y=new Map;function _(e,i,l,a){var c;let u=null,d=null;if(a.useVirtualElement)d={getBoundingClientRect:()=>({width:0,height:0,x:a.clientX,y:a.clientY,top:a.clientY,left:a.clientX,right:a.clientX,bottom:a.clientY})};else switch(a.referenceType){case"cssSelecter":d=document.querySelector(i);break;case"elementReference":d=i;break;case"idComponentBase":d=document.getElementById(a.refElementId)}if(!e||!d)return;const p=l.dataset.id;a.autoUpdate&&p&&Y.has(p)&&(null===(c=Y.get(p))||void 0===c||c.call(globalThis),Y.delete(p));let h={strategy:a.strategy,placement:a.placement,middleware:[g(a.mainAxis),m(),(y={padding:a.shiftPadding},void 0===y&&(y={}),{name:"shift",options:y,async fn(e){const{x:o,y:i,placement:r}=e,{mainAxis:l=!0,crossAxis:a=!1,limiter:c={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...u}=y,d={x:o,y:i},p=await s(e,u),h=n(t(r)),m="x"===h?"y":"x";let g=d[h],w=d[m];if(l){const t="y"===h?"bottom":"right";g=f(g+p["y"===h?"top":"left"],g,g-p[t])}if(a){const t="y"===m?"bottom":"right";w=f(w+p["y"===m?"top":"left"],w,w-p[t])}const x=c.fn({...e,[h]:g,[m]:w});return{...x,data:{x:x.x-o,y:x.y-i}}}})]};var y;async function w(){await X(d,l,h).then((({x:t,y:n,placement:o,strategy:i,middlewareData:r})=>{var s,c,f;if(null==u)Object.assign(l.style,{position:i,left:`${t}px`,top:`${n}px`,opacity:1,transform:"scale(1)",transition:"transform 0.2s ease, opacity 0.1s ease","z-index":null}),e.invokeMethodAsync("ApplyStyles",t,n,null,null,null);else{const d=null===(s=r.arrow)||void 0===s?void 0:s.x,p=null===(c=r.arrow)||void 0===c?void 0:c.y,h=null==p?"":`${p}px`,m=null==d?"":`${d}px`,g=null!==(f={top:"bottom",right:"left",bottom:"top",left:"right"}[o.split("-")[0]])&&void 0!==f?f:"bottom";Object.assign(l.style,{position:i,left:`${t}px`,top:`${n}px`,opacity:1,transform:"scale(1)",transition:"transform 0.2s ease, opacity 0.1s ease","z-index":null}),Object.assign(u.style,{position:i,left:m,top:h,[g]:`${a.arrowOffset}px`}),e.invokeMethodAsync("ApplyStyles",t,n,d,p,g)}}))}a.useArrow&&(u=l.querySelector("[data-element=arrow]"),null!=u&&h.middleware.push((t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:l=0}=null!=t?t:{},{x:s,y:a,placement:c,rects:u,platform:d}=e;if(null==i)return process.env.NODE_ENV,{};const p=r(l),h={x:s,y:a},m=n(c),g=o(m),y=await d.getDimensions(i),w="y"===m?"top":"left",x="y"===m?"bottom":"right",v=u.reference[g]+u.reference[m]-h[m]-u.floating[g],b=h[m]-u.reference[m],R=await(null==d.getOffsetParent?void 0:d.getOffsetParent(i)),E=R?"y"===m?R.clientHeight||0:R.clientWidth||0:0,T=v/2-b/2,L=p[w],A=E-y[g]-p[x],O=E/2-y[g]/2+T,D=f(L,O,A);return{data:{[m]:D,centerOffset:O-D}}}}))({element:u}))),"hidden"==a.initialState&&0==a.show&&Object.assign(l.style,{display:"block",position:a.strategy,left:null,top:null,opacity:0,transform:"scale(0)",transition:"transform 0.2s ease, opacity 0.1s ease","z-index":-1e3}),w(),a.autoUpdate&&p&&Y.set(p,function(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:s=!1}=o;let a=!1;const c=i&&!s,f=r&&!s,u=l&&!s,d=c||f?[...R(t)?F(t):[],...F(e)]:[];d.forEach((t=>{c&&t.addEventListener("scroll",n,{passive:!0}),f&&t.addEventListener("resize",n)}));let p,h=null;u&&(h=new ResizeObserver(n),R(t)&&h.observe(t),h.observe(e));let m=s?S(t):null;return s&&function e(){if(a)return;const o=S(t);!m||o.x===m.x&&o.y===m.y&&o.width===m.width&&o.height===m.height||n(),m=o,p=requestAnimationFrame(e)}(),()=>{var t;a=!0,d.forEach((t=>{c&&t.removeEventListener("scroll",n),f&&t.removeEventListener("resize",n)})),null==(t=h)||t.disconnect(),h=null,s&&cancelAnimationFrame(p)}}(d,l,w))}function q(t){var e;const n=t.dataset.id;n&&Y.has(n)&&(null===(e=Y.get(n))||void 0===e||e.call(globalThis),Y.delete(n))}export{q as cleanupFloating,_ as computeFloating};
