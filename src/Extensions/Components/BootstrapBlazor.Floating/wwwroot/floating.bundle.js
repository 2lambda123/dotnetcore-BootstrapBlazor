function t(t){return t.split("-")[0]}function e(t){return t.split("-")[1]}function n(e){return["top","bottom"].includes(t(e))?"x":"y"}function o(t){return"y"===t?"height":"width"}function i(i,r,l){let{reference:s,floating:c}=i;const a=s.x+s.width/2-c.width/2,f=s.y+s.height/2-c.height/2,u=n(r),d=o(u),p=s[d]/2-c[d]/2,h="x"===u;let g;switch(t(r)){case"top":g={x:a,y:s.y-c.height};break;case"bottom":g={x:a,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-c.width,y:f};break;default:g={x:s.x,y:s.y}}switch(e(r)){case"start":g[u]-=p*(l&&h?-1:1);break;case"end":g[u]+=p*(l&&h?-1:1)}return g}!function(){const t={SOME_OBJECT:{one:1,two:[1,2],three:"3"},UNUSED:null};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,t)}catch(t){}globalThis.process={env:t}}();function r(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:s,rects:c,elements:a,strategy:f}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:h=!1,padding:g=0}=e,m=r(g),y=a[h?"floating"===p?"reference":"floating":p],w=l(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(y)))||n?y:y.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:f})),v=l(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===p?{...c.floating,x:o,y:i}:c.reference,offsetParent:await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),strategy:f}):c[p]);return{top:w.top-v.top+m.top,bottom:v.bottom-w.bottom+m.bottom,left:w.left-v.left+m.left,right:v.right-w.right+m.right}}const c=Math.min,a=Math.max;function f(t,e,n){return a(t,c(e,n))}const u={left:"right",right:"left",bottom:"top",top:"bottom"};function d(t){return t.replace(/left|right|bottom|top/g,(t=>u[t]))}const p={start:"end",end:"start"};function h(t){return t.replace(/start|end/g,(t=>p[t]))}const g=function(i){return void 0===i&&(i={}),{name:"flip",options:i,async fn(r){var l;const{placement:c,middlewareData:a,rects:f,initialPlacement:u,platform:p,elements:g}=r,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:w,fallbackStrategy:v="bestFit",flipAlignment:x=!0,...b}=i,R=t(c),E=w||(R===u||!x?[d(u)]:function(t){const e=d(t);return[h(t),e,h(e)]}(u)),T=[u,...E],L=await s(r,b),A=[];let O=(null==(l=a.flip)?void 0:l.overflows)||[];if(m&&A.push(L[R]),y){const{main:t,cross:i}=function(t,i,r){void 0===r&&(r=!1);const l=e(t),s=n(t),c=o(s);let a="x"===s?l===(r?"end":"start")?"right":"left":"start"===l?"bottom":"top";return i.reference[c]>i.floating[c]&&(a=d(a)),{main:a,cross:d(a)}}(c,f,await(null==p.isRTL?void 0:p.isRTL(g.floating)));A.push(L[t],L[i])}if(O=[...O,{placement:c,overflows:A}],!A.every((t=>t<=0))){var D,P;const t=(null!=(D=null==(P=a.flip)?void 0:P.index)?D:0)+1,e=T[t];if(e)return{data:{index:t,overflows:O},reset:{placement:e}};let n="bottom";switch(v){case"bestFit":{var S;const t=null==(S=O.slice().sort(((t,e)=>t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)-e.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)))[0])?void 0:S.placement;t&&(n=t);break}case"initialPlacement":n=u}if(c!==n)return{reset:{placement:n}}}return{}}}};const m=function(o){return void 0===o&&(o=0),{name:"offset",options:o,async fn(i){const{x:r,y:l,placement:s,rects:c,platform:a,elements:f}=i,u=function(o,i,r,l){void 0===l&&(l=!1);const s=t(o),c=e(o),a="x"===n(o),f=["left","top"].includes(s)?-1:1,u=l&&a?-1:1,d="function"==typeof r?r({...i,placement:o}):r,p="number"==typeof d;let{mainAxis:h,crossAxis:g,alignmentAxis:m}=p?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return c&&"number"==typeof m&&(g="end"===c?-1*m:m),a?{x:g*u,y:h*f}:{x:h*f,y:g*u}}(s,c,o,await(null==a.isRTL?void 0:a.isRTL(f.floating)));return{x:r+u.x,y:l+u.y,data:u}}}};function y(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function w(t){if(null==t)return window;if(!y(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function v(t){return w(t).getComputedStyle(t)}function x(t){return y(t)?"":t?(t.nodeName||"").toLowerCase():""}function b(t){return t instanceof w(t).HTMLElement}function R(t){return t instanceof w(t).Element}function E(t){return t instanceof w(t).ShadowRoot||t instanceof ShadowRoot}function T(t){const{overflow:e,overflowX:n,overflowY:o}=v(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function L(t){return["table","td","th"].includes(x(t))}function A(t){const e=navigator.userAgent.toLowerCase().includes("firefox"),n=v(t);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter}function O(){return!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const D=Math.min,P=Math.max,S=Math.round;function C(t,e,n){var o,i,r,l;void 0===e&&(e=!1),void 0===n&&(n=!1);const s=t.getBoundingClientRect();let c=1,a=1;e&&b(t)&&(c=t.offsetWidth>0&&S(s.width)/t.offsetWidth||1,a=t.offsetHeight>0&&S(s.height)/t.offsetHeight||1);const f=R(t)?w(t):window,u=!O()&&n,d=(s.left+(u&&null!=(o=null==(i=f.visualViewport)?void 0:i.offsetLeft)?o:0))/c,p=(s.top+(u&&null!=(r=null==(l=f.visualViewport)?void 0:l.offsetTop)?r:0))/a,h=s.width/c,g=s.height/a;return{width:h,height:g,top:p,right:d+h,bottom:p+g,left:d,x:d,y:p}}function N(t){return(e=t,(e instanceof w(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function W(t){return R(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function H(t){return C(N(t)).left+W(t).scrollLeft}function k(t,e,n){const o=b(e),i=N(e),r=C(t,o&&function(t){const e=C(t);return S(e.width)!==t.offsetWidth||S(e.height)!==t.offsetHeight}(e),"fixed"===n);let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==x(e)||T(i))&&(l=W(e)),b(e)){const t=C(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else i&&(s.x=H(i));return{x:r.left+l.scrollLeft-s.x,y:r.top+l.scrollTop-s.y,width:r.width,height:r.height}}function V(t){return"html"===x(t)?t:t.assignedSlot||t.parentNode||(E(t)?t.host:null)||N(t)}function M(t){return b(t)&&"fixed"!==getComputedStyle(t).position?t.offsetParent:null}function j(t){const e=w(t);let n=M(t);for(;n&&L(n)&&"static"===getComputedStyle(n).position;)n=M(n);return n&&("html"===x(n)||"body"===x(n)&&"static"===getComputedStyle(n).position&&!A(n))?e:n||function(t){let e=V(t);for(E(e)&&(e=e.host);b(e)&&!["html","body"].includes(x(e));){if(A(e))return e;e=e.parentNode}return null}(t)||e}function F(t){if(b(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=C(t);return{width:e.width,height:e.height}}function z(t){const e=V(t);return["html","body","#document"].includes(x(e))?t.ownerDocument.body:b(e)&&T(e)?e:z(e)}function B(t,e){var n;void 0===e&&(e=[]);const o=z(t),i=o===(null==(n=t.ownerDocument)?void 0:n.body),r=w(o),l=i?[r].concat(r.visualViewport||[],T(o)?o:[]):o,s=e.concat(l);return i?s:s.concat(B(l))}function U(t,e,n){return"viewport"===e?l(function(t,e){const n=w(t),o=N(t),i=n.visualViewport;let r=o.clientWidth,l=o.clientHeight,s=0,c=0;if(i){r=i.width,l=i.height;const t=O();(t||!t&&"fixed"===e)&&(s=i.offsetLeft,c=i.offsetTop)}return{width:r,height:l,x:s,y:c}}(t,n)):R(e)?function(t,e){const n=C(t,!1,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e,n):l(function(t){var e;const n=N(t),o=W(t),i=null==(e=t.ownerDocument)?void 0:e.body,r=P(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=P(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let s=-o.scrollLeft+H(t);const c=-o.scrollTop;return"rtl"===v(i||n).direction&&(s+=P(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:l,x:s,y:c}}(N(t)))}function $(t){const e=B(t),n=["absolute","fixed"].includes(v(t).position)&&b(t)?j(t):t;return R(n)?e.filter((t=>R(t)&&function(t,e){const n=null==e||null==e.getRootNode?void 0:e.getRootNode();if(null!=t&&t.contains(e))return!0;if(n&&E(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&"body"!==x(t))):[]}const _={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[..."clippingAncestors"===n?$(e):[].concat(n),o],l=r[0],s=r.reduce(((t,n)=>{const o=U(e,n,i);return t.top=P(o.top,t.top),t.right=D(o.right,t.right),t.bottom=D(o.bottom,t.bottom),t.left=P(o.left,t.left),t}),U(e,l,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=b(n),r=N(n);if(n===r)return e;let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&"fixed"!==o)&&(("body"!==x(n)||T(r))&&(l=W(n)),b(n))){const t=C(n,!0);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}return{...e,x:e.x-l.scrollLeft+s.x,y:e.y-l.scrollTop+s.y}},isElement:R,getDimensions:F,getOffsetParent:j,getDocumentElement:N,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:k(e,j(n),o),floating:{...F(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===v(t).direction};const q=(t,e,n)=>(async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:l=[],platform:s}=n,c=await(null==s.isRTL?void 0:s.isRTL(e));if("production"!==process.env.NODE_ENV&&l.filter((t=>{let{name:e}=t;return"autoPlacement"===e||"flip"===e})).length>1)throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement`","middleware detected. This will lead to an infinite loop. Ensure only","one of either has been passed to the `middleware` array."].join(" "));let a=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:f,y:u}=i(a,o,c),d=o,p={},h=0;for(let n=0;n<l.length;n++){if("production"!==process.env.NODE_ENV&&(h++,h>100))throw new Error(["Floating UI: The middleware lifecycle appears to be","running in an infinite loop. This is usually caused by a `reset`","continually being returned without a break condition."].join(" "));const{name:g,fn:m}=l[n],{x:y,y:w,data:v,reset:x}=await m({x:f,y:u,initialPlacement:o,placement:d,strategy:r,middlewareData:p,rects:a,platform:s,elements:{reference:t,floating:e}});f=null!=y?y:f,u=null!=w?w:u,p={...p,[g]:{...p[g],...v}},x&&("object"==typeof x&&(x.placement&&(d=x.placement),x.rects&&(a=!0===x.rects?await s.getElementRects({reference:t,floating:e,strategy:r}):x.rects),({x:f,y:u}=i(a,d,c))),n=-1)}return{x:f,y:u,placement:d,strategy:r,middlewareData:p}})(t,e,{platform:_,...n}),I=new Map;function X(e,i,l,c){var a;const u=l||document.querySelector(c.targetSelecter);if(!(e&&i&&c&&u))return;const d=i.dataset.id;1==(null==c?void 0:c.autoUpdate)&&d&&I.has(d)&&(null===(a=I.get(d))||void 0===a||a.call(globalThis),I.delete(d));let p,h={strategy:c.strategy,placement:c.placement,middleware:[m(c.mainAxis),g(),(y={padding:c.shiftPadding},void 0===y&&(y={}),{name:"shift",options:y,async fn(e){const{x:o,y:i,placement:r}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:a={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...u}=y,d={x:o,y:i},p=await s(e,u),h=n(t(r)),g="x"===h?"y":"x";let m=d[h],w=d[g];if(l){const t="y"===h?"bottom":"right";m=f(m+p["y"===h?"top":"left"],m,m-p[t])}if(c){const t="y"===g?"bottom":"right";w=f(w+p["y"===g?"top":"left"],w,w-p[t])}const v=a.fn({...e,[h]:m,[g]:w});return{...v,data:{x:v.x-o,y:v.y-i}}}})]};var y;async function w(){await q(u,i,h).then((({x:t,y:n,placement:o,strategy:r,middlewareData:l})=>{var s,c,a;if(i.style.left!=t.toString()||i.style.top!=n.toString())if(p){const f=null===(s=l.arrow)||void 0===s?void 0:s.x,u=null===(c=l.arrow)||void 0===c?void 0:c.y,d=null!==(a={top:"bottom",right:"left",bottom:"top",left:"right"}[o.split("-")[0]])&&void 0!==a?a:"bottom",h=null==u?"":`${u}px`,g=null==f?"":`${f}px`;Object.assign(i.style,{position:r,left:`${t}px`,top:`${n}px`}),Object.assign(p.style,{position:r,left:g,top:h,[d]:"-4px"}),e.invokeMethodAsync("ApplyStyles",t,n,f,u,d)}else Object.assign(i.style,{position:r,left:`${t}px`,top:`${n}px`}),e.invokeMethodAsync("ApplyStyles",t,n,null,null,null)}))}c.useArrow&&(p=i.querySelector("[data-element=arrow]"),p&&h.middleware.push((t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:l=0}=null!=t?t:{},{x:s,y:c,placement:a,rects:u,platform:d}=e;if(null==i)return process.env.NODE_ENV,{};const p=r(l),h={x:s,y:c},g=n(a),m=o(g),y=await d.getDimensions(i),w="y"===g?"top":"left",v="y"===g?"bottom":"right",x=u.reference[m]+u.reference[g]-h[g]-u.floating[m],b=h[g]-u.reference[g],R=await(null==d.getOffsetParent?void 0:d.getOffsetParent(i)),E=R?"y"===g?R.clientHeight||0:R.clientWidth||0:0,T=x/2-b/2,L=p[w],A=E-y[m]-p[v],O=E/2-y[m]/2+T,D=f(L,O,A);return{data:{[g]:D,centerOffset:O-D}}}}))({element:p}))),c.hidden&&Object.assign(i.style,{display:"block",opacity:0,position:c.strategy,"z- index":-1e3}),w(),1==(null==c?void 0:c.autoUpdate)&&d&&I.set(d,function(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:s=!1}=o;let c=!1;const a=i&&!s,f=r&&!s,u=l&&!s,d=a||f?[...R(t)?B(t):[],...B(e)]:[];d.forEach((t=>{a&&t.addEventListener("scroll",n,{passive:!0}),f&&t.addEventListener("resize",n)}));let p,h=null;u&&(h=new ResizeObserver(n),R(t)&&h.observe(t),h.observe(e));let g=s?C(t):null;return s&&function e(){if(c)return;const o=C(t);!g||o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height||n(),g=o,p=requestAnimationFrame(e)}(),()=>{var t;c=!0,d.forEach((t=>{a&&t.removeEventListener("scroll",n),f&&t.removeEventListener("resize",n)})),null==(t=h)||t.disconnect(),h=null,s&&cancelAnimationFrame(p)}}(u,i,w))}function Y(t){var e;const n=t.dataset.id;n&&I.has(n)&&(null===(e=I.get(n))||void 0===e||e.call(globalThis),I.delete(n))}export{Y as cleanupFloating,X as createFloating};
